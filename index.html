<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GiftsMine üéÅ</title>
<style>
body {
  margin:0;font-family:Segoe UI,sans-serif;color:#fff;
  display:flex;flex-direction:column;height:100vh;user-select:none;
  overflow:hidden;background-size:cover;background-position:center;
  background-repeat:no-repeat;opacity:0;transition:opacity 0.6s ease;
}
#balance {
  padding:15px;text-align:right;font-size:1.2em;font-weight:bold;
  background:rgba(0,0,0,0.15);backdrop-filter:blur(5px);
  position:relative;box-shadow:0 2px 8px rgba(0,0,0,0.3);
}
main {flex:1;overflow-y:auto;padding:10px;display:none;background: rgba(0,0,0,0.2);}
main.active {display:block;}
.tab-bar {
  display:flex;justify-content:space-around;background: rgba(0,0,0,0.2);
  padding:10px;border-top:2px solid #fff;
}
.tab-bar button {
  flex:1;margin:0 5px;padding:10px;border:none;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  color:#fff;font-weight:bold;cursor:pointer;transition:0.3s;
}
.tab-bar button.active {
  background:linear-gradient(135deg,#a1c4fd,#c2e9fb);color:#fff;
}
.grid {display:grid;gap:5px;justify-content:center;}
.mines-grid {grid-template-columns: repeat(5, minmax(50px,1fr));}
.mine-cell,.block {
  aspect-ratio:1/1;background:#333;border-radius:0;
  display:flex;align-items:center;justify-content:center;
  font-size:0.9em;font-weight:bold;cursor:pointer;transition:0.2s;
  touch-action:none;box-shadow:0 2px 6px rgba(0,0,0,0.2);
  position:relative;overflow:hidden;background-size:cover;background-position:center;
}
.block.cooldown {filter:brightness(0.5);pointer-events:none;}
.block-price {
  position:absolute;bottom:2px;right:2px;
  background:rgba(0,0,0,0.5);padding:2px 4px;font-size:0.7em;border-radius:2px;
  display:flex;align-items:center;gap:2px;
}
.inventory-list {display:flex;flex-wrap:wrap;gap:10px;}
.gift-item {
  background:#222;padding:10px;box-shadow:0 6px 16px rgba(0,0,0,0.5);
  font-size:0.9em;flex:1 1 45%;display:flex;align-items:center;gap:10px;
  transition:0.3s;position:relative;color:#fff;
}
.gift-img {width:50px;height:50px;}
.inv-actions {margin-left:auto;display:flex;flex-direction:column;gap:5px;}
.inv-actions button {
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);border:none;
  padding:5px 8px;color:#fff;font-size:0.8em;border-radius:6px;cursor:pointer;
}
#loader {
  position:fixed;top:0;left:0;width:100%;height:100%;
  display:flex;align-items:center;justify-content:center;flex-direction:column;
  z-index:9999;background:#000;transition:opacity 0.6s ease;color:#fff;
}
#loader.hidden {opacity:0;pointer-events:none;}
#loaderAnimation {width:150px;height:150px;margin-bottom:20px;}
.flying {position:absolute;width:80px;height:80px;pointer-events:none;z-index:1000;}
</style>
</head>
<body>

<div id="loader">
  <div id="loaderAnimation"></div>
  <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...</p>
</div>

<div id="balance">–ë–∞–ª–∞–Ω—Å: 10000 <img src="ton.svg" style="width:16px;vertical-align:middle"></div>

<main id="menu" class="active">
<h2>–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</h2>
<p>–í—ã–±–∏—Ä–∞–π —Ä–µ–∂–∏–º –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –ø–æ–¥–∞—Ä–∫–∏!</p>
</main>

<main id="mines">
<h2>–ú–∏–Ω—ã üí£</h2>
<div id="minesGrid" class="grid mines-grid"></div>
</main>

<main id="mine">
<h2>–®–∞—Ö—Ç–∞ ‚õèÔ∏è</h2>
<div id="mineGrid" class="grid" style="grid-template-columns:repeat(5,1fr)"></div>
</main>

<main id="inventory">
<h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å üéí</h2>
<div class="inventory-list" id="inventoryList"></div>
</main>

<div class="tab-bar">
  <button onclick="showTab('menu')" id="tab-menu" class="active">–ú–µ–Ω—é</button>
  <button onclick="showTab('mines')" id="tab-mines">–ú–∏–Ω—ã</button>
  <button onclick="showTab('mine')" id="tab-mine">–®–∞—Ö—Ç–∞</button>
  <button onclick="showTab('inventory')" id="tab-inventory">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.10.2/lottie.min.js"></script>
<script>
// --- –ë–∞–ª–∞–Ω—Å ---
let balance=10000;
function updateBalance(){
  document.getElementById('balance').innerHTML=`–ë–∞–ª–∞–Ω—Å: ${balance.toFixed(2)} <img src="ton.svg" style="width:16px;vertical-align:middle">`;
}

// --- –§–æ–Ω—ã ---
const backgrounds={
  menu:'images/menu.jpg',
  mines:'images/mines.jpg',
  mine:'images/mine.jpg',
  inventory:'images/inventory.jpg'
};

// --- –í–∫–ª–∞–¥–∫–∏ ---
function showTab(id){
  document.querySelectorAll('main').forEach(m=>m.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.tab-bar button').forEach(b=>b.classList.remove('active'));
  document.getElementById('tab-'+id).classList.add('active');
  document.body.style.backgroundImage=`url(${backgrounds[id]})`;
  if(id==='inventory') renderInventory();
}

// --- –ü–æ–¥–∞—Ä–∫–∏ ---
const gifts=[
  {name:"Hypno Lollipop",price:1.77}, {name:"Desk Calendar",price:1.31}, {name:"B-Day Candle",price:1.32},
  {name:"Lol Pop",price:1.32}, {name:"Snake Box",price:1.36}, {name:"Lunar Snake",price:1.38}, {name:"Xmas Stocking",price:1.38},
  {name:"Whip Cupcake",price:1.38}, {name:"Candy Cane",price:1.48}, {name:"Pet Snake",price:1.58}, {name:"Jester Hat",price:1.62},
  {name:"Snoop Dogg",price:1.64}, {name:"Homemade Cake",price:1.7}, {name:"Holiday Drink",price:1.7}, {name:"Jingle Bells",price:1.74},
  {name:"Cookie Heart",price:1.75}, {name:"Big Year",price:1.78}, {name:"Party Sparkler",price:1.8}, {name:"Winter Wreath",price:1.79},
  {name:"Swag Bag",price:1.91}, {name:"Tama Gadget",price:1.93}, {name:"Ginger Cookie",price:1.95}, {name:"Moon Pendant",price:1.96},
  {name:"Jack-in-the-Box",price:2.01}, {name:"Spiced Wine",price:2.12}, {name:"Stellar Rocket",price:2.19}, {name:"Star Notepad",price:2.32},
  {name:"Easter Egg",price:2.46}, {name:"Restless Jar",price:2.5}, {name:"Santa Hat",price:2.6}, {name:"Snow Globe",price:2.65},
  {name:"Hex Pot",price:2.7}, {name:"Joyful Bundle",price:2.71}, {name:"Lush Bouquet",price:2.84}, {name:"Witch Hat",price:2.86},
  {name:"Light Sword",price:3.13}, {name:"Spy Agaric",price:3.2}, {name:"Bow Tie",price:3.22}, {name:"Eternal Candle",price:3.38},
  {name:"Bunny Muffin",price:3.34}, {name:"Jelly Bunny",price:3.43}, {name:"Berry Box",price:3.58}, {name:"Evil Eye",price:3.6},
  {name:"Snow Mittens",price:3.67}, {name:"Valentine Box",price:4.2}, {name:"Snoop Cigar",price:4.26}, {name:"Sakura Flower",price:4.77},
  {name:"Hanging Star",price:5.26}, {name:"Jolly Chimp",price:5.34}, {name:"Sleigh Bell",price:7.63}, {name:"Skull Flower",price:7.7},
  {name:"Crystal Ball",price:7.86}, {name:"Record Player",price:7.91}, {name:"Love Candle",price:7.94}, {name:"Top Hat",price:7.99},
  {name:"Trapped Heart",price:8.69}, {name:"Love Potion",price:8.79}, {name:"Flying Broom",price:9.45}, {name:"Cupid Charm",price:11.26},
  {name:"Eternal Rose",price:13.71}, {name:"Ionic Dryer",price:14.21}, {name:"Diamond Ring",price:16.39}, {name:"Voodoo Doll",price:16.43},
  {name:"Mad Pumpkin",price:17.91}, {name:"Toy Bear",price:19.3}, {name:"Vintage Cigar",price:23.98}, {name:"Low Rider",price:24.8},
  {name:"Signet Ring",price:25.1}, {name:"Neko Helmet",price:26.41}, {name:"Electric Skull",price:31}, {name:"Kissed Frog",price:34},
  {name:"Swiss Watch",price:35}, {name:"Sharp Tongue",price:39.69}, {name:"Scared Cat",price:43.6}, {name:"Genie Lamp",price:47.07},
  {name:"Westside Sign",price:51.27}, {name:"Bonded Ring",price:54.99}, {name:"Gem Signet",price:72.98}, {name:"Magic Potion",price:72.98},
  {name:"Ion Gem",price:83}, {name:"Astral Shard",price:95.97}, {name:"Perfume Bottle",price:95.99}, {name:"Loot Bag",price:90.1},
  {name:"Mini Oscar",price:123.89}, {name:"Nail Bracelet",price:129.84}, {name:"Heroic Helmet",price:219.99}, {name:"Precious Peach",price:379.99},
  {name:"Durov‚Äôs Cap",price:794.9}, {name:"Heart Locket",price:1450}, {name:"Plush Pepe",price:5199}
];
let inventory=[];

// --- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å ---
function renderInventory(){
  const list=document.getElementById('inventoryList');
  list.innerHTML="";
  inventory.forEach((g,i)=>{
    let div=document.createElement("div");
    div.className="gift-item";
    div.innerHTML=`<img class="gift-img" src="images/${g.name}.png"><div>${g.name}<br>${g.price.toFixed(2)} TON</div>`;
    let actions=document.createElement("div");
    actions.className="inv-actions";
    let sell=document.createElement("button");
    sell.textContent="–ü—Ä–æ–¥–∞—Ç—å";
    sell.onclick=()=>{balance+=g.price;inventory.splice(i,1);updateBalance();renderInventory();};
    let withdraw=document.createElement("button");
    withdraw.textContent="–í—ã–≤–µ—Å—Ç–∏";
    withdraw.onclick=()=>alert("–§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ");
    actions.appendChild(sell);actions.appendChild(withdraw);
    div.appendChild(actions);
    list.appendChild(div);
  });
}

// --- –®–∞—Ö—Ç–∞ ---
function generateMineGrid(){
  const grid=document.getElementById('mineGrid');
  grid.innerHTML="";
  for(let i=0;i<25;i++){
    let cell=document.createElement("div");
    cell.className="block";
    let g=gifts[Math.floor(Math.random()*gifts.length)];
    cell.dataset.name=g.name;
    let price=g.price*(0.5+Math.random()*0.8); // -50% –¥–æ +30%
    cell.dataset.price=price;
    cell.innerHTML=`<div class="block-price">${price.toFixed(2)}T</div>`;
    cell.onclick=()=>breakBlock(cell);
    grid.appendChild(cell);
  }
}
function breakBlock(cell){
  if(cell.classList.contains("cooldown"))return;
  let price=parseFloat(cell.dataset.price);
  balance-=price;
  updateBalance();
  let gName=cell.dataset.name;
  inventory.push({name:gName,price:parseFloat(cell.dataset.price)});
  renderInventory();
  let img=document.createElement("img");
  img.src=`images/${gName}.png`;img.className="flying";
  document.body.appendChild(img);
  let rect=cell.getBoundingClientRect();
  img.style.left=rect.left+"px";img.style.top=rect.top+"px";
  let inv=document.getElementById("inventoryList").getBoundingClientRect();
  setTimeout(()=>{
    img.style.transition="1s";img.style.left=inv.right-100+"px";img.style.top=inv.bottom-100+"px";img.style.opacity=0;
  },10);
  setTimeout(()=>img.remove(),1100);
  cell.classList.add("cooldown");
  let cd=60000+Math.random()*29*60000;
  setTimeout(()=>{
    let g=gifts[Math.floor(Math.random()*gifts.length)];
    cell.dataset.name=g.name;
    let price=g.price*(0.5+Math.random()*0.8);
    cell.dataset.price=price;
    cell.classList.remove("cooldown");
    cell.innerHTML=`<div class="block-price">${price.toFixed(2)}T</div>`;
  },cd);
}

// --- –õ–æ–∞–¥–µ—Ä ---
lottie.loadAnimation({
  container:document.getElementById('loaderAnimation'),
  renderer:'svg',loop:true,autoplay:true,
  path:'animations/myLoader.json'
});

// --- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ (—Ç–æ–ª—å–∫–æ —Ñ–æ–Ω + –ª–æ–∞–¥–µ—Ä) ---
function preloadAssets(){
  const bg=Object.values(backgrounds).map(src=>new Promise(res=>{let i=new Image();i.onload=res;i.onerror=res;i.src=src;}));
  Promise.all(bg).then(()=>{
    document.getElementById('loader').classList.add('hidden');
    document.body.style.opacity="1";
    updateBalance();generateMineGrid();
  });
}
window.onload=preloadAssets;
</script>
</body>
</html>
